machine:
    node:
        version: 4.1.0
    python:
        version: 2.7.9
    services:
        - docker
    post:
        - pip install -U docker-compose==1.3.3

dependencies:
    cache_directories:
         - "~/docker"
    override:
        - if [[ -e ~/docker/kafka.tar ]]; then docker load -i ~/docker/kafka.tar; fi
        - if [[ -e ~/docker/zookeeper.tar ]]; then docker load -i ~/docker/zookeeper.tar; fi
        - docker-compose pull kafka zookeeper
        - mkdir -p ~/docker
        - docker save wurstmeister/zookeeper > ~/docker/zookeeper.tar
        - docker save cantireinnovations/kafka:kafka-v0.8.2.1_scala-v2.10 > ~/docker/kafka.tar
